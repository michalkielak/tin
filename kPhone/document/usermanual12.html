<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=utf-8">
  <title>Provisioning of the Providers</title>
  <style type="text">
	<!--
		@page { size: 21cm 29.7cm; margin-left: 2cm; margin-right: 2cm; margin-top: 0.8cm; margin-bottom: 0.8cm }
		TD P.cjk { font-weight: medium }
		TD P.ctl { font-weight: medium }
		H1.western { font-family: "Nimbus Sans L" }
		P.cjk { font-weight: medium }
		P.ctl { font-weight: medium }
	-->
	</style>
</head>
<body dir="ltr" lang="en-US">
<a href="index.html">back to the ToC</a>
<h1 class="western" style="page-break-before: always;"><a
 class="mozTocH1" name="mozTocId316818"></a>KPhoneIS User
Manual: How to Connect</h1>
<br>
<ol id="mozToc">
<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6-->
  <li><a href="#mozTocId316818">KPhoneIS User
Manual: How to Connect</a>
    <ol>
      <li><a href="#mozTocId446243">Connection Modes: UA Point to Point</a></li>
      <li><a href="#mozTocId262596">Connection Modes: Using a proxy
agent
        </a></li>
      <li><a href="#mozTocId250645">Connection Modes: Using a proxy
agent and STUN </a></li>
      <li><a href="#mozTocId102295">The "NAT traversal" Problem: A
short Introduction </a></li>
      <li><a href="#mozTocId167382">"NAT traversal" solutions</a></li>
    </ol>
  </li>
</ol>
<br>
<h2><a class="mozTocH2" name="mozTocId446243"></a>Connection Modes: UA
Point to Point</h2>
<table style="width: 755px; height: 217px;" border="1" cellpadding="2"
 cellspacing="0">
  <col width="92"> <col width="526"> <tbody>
    <tr>
      <td colspan="2" bgcolor="#ffffff" valign="top" width="622">
      <p class="western"><b>UA Point to Point</b></p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="92">
      <p class="western">1<sup>st</sup> step</p>
      </td>
      <td bgcolor="#ffffff" width="526">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> select a free port
for SIP (default 5060)</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="92">
      <p class="western">2<sup>nd</sup> step</p>
      </td>
      <td bgcolor="#ffffff" width="526">
      <p class="western">select -p &lt;port&gt; and -t when you start
the KPhoneSI<br>
      <span style="font-weight: bold;">Example: "<span
 style="font-style: italic;">kpsi&nbsp; -u p2p -p 5000 -t 4 -v 3</span>"</span><br>
      </p>
      <p class="western">The URI is then set to
port@dissipate-address:port</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="92">
      <p class="western">3<sup>rd</sup></p>
      <p class="western"><br>
      </p>
      </td>
      <td bgcolor="#ffffff" width="526">
      <p class="western">Call a partner using userid@host:port</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="western" style="margin-bottom: 0cm;"><br>
</p>
<h2><a class="mozTocH2" name="mozTocId262596"></a>Connection Modes:
Using a proxy agent<br>
</h2>
<table style="width: 756px; height: 431px;" border="1" cellpadding="2"
 cellspacing="0">
  <col width="102"> <col width="175"> <col width="338"> <tbody>
    <tr>
      <td colspan="3" bgcolor="#ffffff" valign="top" width="622">
      <p class="western"><b>Public IP </b> </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="102">
      <p class="western">1<sup>st</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Get the settings
from your provider </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="102">
      <p class="western">2<sup>nd</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western">open the Identity – Editor </p>
      </td>
    </tr>
    <tr>
      <td rowspan="8" bgcolor="#ffffff" width="102">
      <p class="western">3<sup>rd</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western">Enter the settings, your provider gave you</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"><b>Field of the Identity – Editor</b></p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"><b>value</b></p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Full Name</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"><a href="mailto:userid@proxy">userid@proxy</a>
or a name of your choice</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> User Part of SIP URL</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> UserId (SIP Phone
Number)</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Host Part of SIP URL</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> IP address of the
Proxy-Agent/Softswitch</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Outbound Proxy</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> IP address (and
port) of the proxy-agent, softswitch or SBC </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Authentication
Username </p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">enter if necessary</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Auto Register</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> set it </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="102">
      <p class="western">4<sup>th</sup> step </p>
      </td>
      <td bgcolor="#ffffff" width="175">
      <p class="western">OK-Button</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">press it</p>
      </td>
    </tr>
  </tbody>
</table>
<p class="western"><br>
<br>
</p>
<h2><a class="mozTocH2" name="mozTocId250645"></a>Connection Modes:
Using a proxy agent and STUN </h2>
<table style="width: 759px; height: 635px;" border="1" cellpadding="2"
 cellspacing="0">
  <col width="102"> <col width="175"> <col width="338"> <tbody>
    <tr>
      <td colspan="3" bgcolor="#ffffff" valign="top" width="622">
      <p class="western"><b>Public IP </b> </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="102">
      <p class="western">1<sup>st</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Get the settings
from your provider </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="102">
      <p class="western">2<sup>nd</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western">open the Identity – Editor </p>
      </td>
    </tr>
    <tr>
      <td rowspan="9" bgcolor="#ffffff" width="102">
      <p class="western">3<sup>rd</sup> step</p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western">Enter the settings, your provider gave you</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"><b>Field of the Identity – Editor</b></p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"><b>value</b></p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Full Name</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"><a href="mailto:userid@proxy">userid@proxy</a>
or a name of your choice</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> User Part of SIP URL</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> UserId (SIP Phone
Number)</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Host Part of SIP URL</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> IP address of the
Proxy-Agent/Softswitch</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Outbound Proxy</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;">IP address (and
port) of the proxy-agent, softswitch or SBC </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Authentication
Username </p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">enter if necessary</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> Auto Register</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> set it </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">OK-Button</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western"
 style="margin-left: 0.02cm; margin-right: 0.9cm;"> press it</p>
      </td>
    </tr>
    <tr>
      <td rowspan="7" bgcolor="#ffffff" width="102">
      <p class="western">4<sup>th</sup> step </p>
      </td>
      <td colspan="2" bgcolor="#ffffff" width="516">
      <p class="western">Go to Preferences-&gt;Sip Preferences -&gt;
Socket </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Use Stun Server</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">yes</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Symmetric IP</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">yes</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Symmetric Media</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">yes</p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Stun Server</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">ask your provider </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">Request Period for STUN server</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">ask your provider </p>
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" width="175">
      <p class="western">OK-Button</p>
      </td>
      <td bgcolor="#ffffff" width="338">
      <p class="western">press it</p>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h2><a class="mozTocH2" name="mozTocId102295"></a>The "NAT traversal"
Problem: A short Introduction <br>
</h2>
The SIP design assumes, that every User Agent (UA) has a global
internet address, thus is freely<br>
reachable from every other UA. Unfortunately, many of us are connected
to a LAN and reach<br>
the Net via an edge router utilizing NAT (network address translation).
This method works fine<br>
with client/server applications, but makes SIP telephony almost
impossible! But there are different<br>
methods to overcome this "NAT traversal" problem.<br>
<br>
<h2><a class="mozTocH2" name="mozTocId167382"></a>"NAT traversal"
solutions</h2>
There are two methods to SIP phone from behind of the NAT<br>
<br>
<ol>
  <li>Use a media switch</li>
  <li>make the UAs know their translated payload IP-address and port</li>
</ol>
The second methode may be achieved in different ways:<br>
<ul>
  <li>2.a Use&nbsp; a SBC with MPO (Media Path Optimization)</li>
  <li>2.b Use STUN</li>
</ul>
<span style="font-weight: bold;">STUN usage may be necessary&nbsp; in
case 1, too! Ask your provider</span><br>
<br>
<span style="font-weight: bold;">In the first case</span> , the
SBC/Softswitche (who incoporate teh media switch) sets up a <br>
client/server relationship to both UAs and switchs the payload packages
between them.<br>
<br>
<span style="font-weight: bold;">In the&nbsp; case 2a</span> ,&nbsp;
the SBC first sets up a client/server relationship to both UAs, but <br>
redirects the media paths to a point to point relationship if possible.
<br>
<br>
<span style="font-weight: bold;">In the cases 1 and 2a</span>, the SBC
may be integrated into your proxy agent (then your <br>
proxy and your outbound proxy addresses&nbsp; will the same) or be a
seperate device (your <br>
proxy and your outbound proxy addresses will differ)<br>
<br>
<span style="font-weight: bold;">In the case 2b</span>, the UA explores
its translated payload address using a STUN-server, which<br>
is located in the net. It then fills the appropiate fields in the SIP
messages. There are preconditions<br>
for this method:<br>
<ol>
  <li>You must not be connected to a SoftSwitch, SBC or any other
device, capable to do media switching for you<br>
in most times this is the case, if your proxy and your outbound proxy
addresses are different </li>
  <li>Your router must have a NAT of type "full cone", "half cone" or
"port resticted". A so called "symmetric NAT"</li>
  <li>won't work</li>
  <li>Your firewall must not enforce client/server relationships</li>
</ol>
<p class="western"><a href="index.html">back to the ToC</a></p>
</body>
</html>
